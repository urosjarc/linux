#!/usr/bin/env python
"""
Description:
    Linux post installation helper.

Usage:
    linux install
    linux config
    linux report [ --apt --pip --npm --config ]

Options:
    -h --help   Extensive help message.
"""

try:
    from libs import *
    import os
    from subprocess import call
    from docopt import docopt
    from apt.cache import LockFailedException

    if __name__ == '__main__':
        args = docopt(__doc__)

        if args['install']:
	    exitIfSudoIsNone()
            pre_install()
            aptInstall()
            pipInstall()
            npmInstall()
            post_install()
	    restartComputer()

        elif args['report']:
            all = True;
            if(args['--apt']):
                aptReport()
                all = False
            if(args['--pip']):
                pipReport()
                all = False
            if(args['--config']):
                configReport()
                all = False
            if (args['--npm']):
                npmReport()
                all = False
            if all:
                aptReport()
                pipReport()
                npmReport()
                configReport()

        elif args['config']:
            exitIfsudoIsNotNone()
            config()

except KeyError as err:
    print('ERROR: ' + err.message)

except ImportError as err:
    print('ERROR: ' + err.message)
    init()
